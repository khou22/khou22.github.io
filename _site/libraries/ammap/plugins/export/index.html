<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <title>
    amCharts Export
  </title>
  <meta
    name="description"
    content="Kevin Hou's portfolio and blog about programming, wood, design, and photography. Princeton University Computer Science '20. Lick-Wilmerding High School '16. San Francisco Bay Area.
"
  />

  <!-- Thumbnail preview -->
  <meta
    property="og:image"
    content="http://localhost:4000/media/meta/thumbnail-preview.jpg"
  />
  <meta
    property="image"
    content="http://localhost:4000/media/meta/thumbnail-preview.jpg"
  />
  <meta
    property="og:image:secure_url"
    content="https://khou22.com/media/meta/thumbnail-preview.jpg"
  />
  <meta property="og:image:width" content="1200" />
  <meta property="og:image:height" content="600" />

  <!-- React -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react/0.13.3/react.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react/0.13.3/JSXTransformer.js"></script>

  <!-- Jquery -->
  <script
    src="https://code.jquery.com/jquery-3.1.1.min.js"
    integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8="
    crossorigin="anonymous"
  ></script>

  <!-- Tile Layout Library -->
  <link rel="stylesheet" type="text/css" href="/libraries/tile-layout-library/style.css"> <link
  rel="stylesheet" href="/css/main.css">
  <link
    rel="canonical"
    href="http://localhost:4000/libraries/ammap/plugins/export/"
  />
  <link rel="alternate" type="application/rss+xml" title="Kevin Hou"
  href="http://localhost:4000/feed.xml" />

  <!-- Bootstrap -->
  <!-- <link href="/css/bootstrap-3.3.5-dist/css/bootstrap.min.css" rel="stylesheet"> -->
  <!-- <script src="/css/bootstrap-3.3.5-dist/js/bootstrap.min.js"></script> -->

  <!-- Pinterest -->
  <meta name="p:domain_verify" content="ba077b9ffb934c298dbb2516fb42bdee" />

  <!-- Semantic UI -->
  <link
    rel="stylesheet"
    type="text/css"
    href="/semantic/dist/semantic.min.css"
  />
  <script src="/semantic/dist/semantic.min.js"></script>

  <!-- Snipcart -->
  <link
    rel="stylesheet"
    href="https://cdn.snipcart.com/themes/v3.0.14/default/snipcart.css"
  />

  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script
    async
    src="https://www.googletagmanager.com/gtag/js?id=UA-66796355-1"
  ></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() {
      dataLayer.push(arguments);
    }
    gtag("js", new Date());

    gtag("config", "UA-66796355-1");
  </script>

  <!-- Favicon -->
  <link
    rel="icon"
    type="image/png"
    href="/media/site/favicon.png"
  />
  <!-- Begin Jekyll SEO tag v2.2.3 -->
<title>amCharts Export | Kevin Hou</title>
<meta property="og:title" content="amCharts Export" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Kevin Hou’s portfolio and blog about programming, wood, design, and photography. Princeton University Computer Science ‘20. Lick-Wilmerding High School ‘16. San Francisco Bay Area." />
<meta property="og:description" content="Kevin Hou’s portfolio and blog about programming, wood, design, and photography. Princeton University Computer Science ‘20. Lick-Wilmerding High School ‘16. San Francisco Bay Area." />
<link rel="canonical" href="http://localhost:4000/libraries/ammap/plugins/export/" />
<meta property="og:url" content="http://localhost:4000/libraries/ammap/plugins/export/" />
<meta property="og:site_name" content="Kevin Hou" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:site" content="@kevinhou22" />
<script type="application/ld+json">
{"@context":"http://schema.org","@type":"WebPage","headline":"amCharts Export","author":{"@type":"Person","name":null},"description":"Kevin Hou’s portfolio and blog about programming, wood, design, and photography. Princeton University Computer Science ‘20. Lick-Wilmerding High School ‘16. San Francisco Bay Area.","url":"http://localhost:4000/libraries/ammap/plugins/export/"}</script>
<!-- End Jekyll SEO tag -->

<script src="http://127.0.0.1:35729/livereload.js"></script></head>


  <body>
    <header>
  <!-- Desktop Client -->
  <div class="site-header" id="site-header">
    <div class="wrapper" style="height: 100%">
      <div class="site-header-background">
        <div class="site-header-content">
          <a href="/" class="header-title-section">
            <img
              src="/media/site/favicon.png"
              class="header-logo"
              align="left"
            />
            <p class="site-title">Kevin Hou</p>
          </a>

          <!-- Site Navigation Bar -->
          <ul class="nav-ul site-nav-bar">
            <li class="nav-li nav-item">
              <a href="/">Home</a>
            </li>
            <li class="nav-li nav-item">
              <a href="/blog">Blog &#9662;</a>
              <ul class="dropdown">
                <li class="nav-li">
                  <a href="/blog/category"
                    >Browse by Category</a
                  >
                </li>
                <li class="nav-li">
                  <a href="/blog/tag">Browse by Tag</a>
                </li>
              </ul>
            </li>
            <li class="nav-li nav-item">
              <a href="/categories">Portfolio &#9662;</a>
              <ul class="dropdown">
                <li class="nav-li">
                  <a href="/programming">Programming</a>
                </li>
                <li class="nav-li">
                  <a href="/wood/">Woodshop</a>
                </li>
                <!-- <li class="nav&#45;li"><a href="https://www.flickr.com/photos/khou22/albums" target="_blank">Woodshop</a></li> -->
                <li class="nav-li">
                  <a href="/design">Design</a>
                </li>
                <li class="nav-li">
                  <a href="/photography">Photography</a>
                </li>
              </ul>
            </li>
            <li class="nav-li nav-item">
              <a href="/contact">Contact</a>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </div>
  <div class="header-placeholder"></div>

  <!-- Activate Tooltips -->
  <script type="text/javascript">
    $(function() {
      $('[data-toggle="tooltip"]').tooltip();
    });
    // Header has two sizes — 80px and 40px — based on scrolling
    $(document).scroll(function() {
      var screenWidth = $(document).width();
      var mobileCuttoff = 800; // Ambiguous
      if (screenWidth > mobileCuttoff) {
        var triggerDistance = 100;
        var classesToChange = [
          {
            className: ".site-header",
            styleElement: "height",
            min: 40,
            max: 80
          },
          {
            className: ".site-title",
            styleElement: "font-size",
            min: 20,
            max: 32
          },
          {
            className: ".site-title",
            styleElement: "line-height",
            min: 2,
            max: 3
          },
          {
            className: ".header-logo",
            styleElement: "height",
            min: 24,
            max: 64
          },
          {
            className: ".site-nav-bar",
            styleElement: "margin-top",
            min: 4,
            max: 24
          }
        ];
        if ($(this).scrollTop() < triggerDistance) {
          // Distance until changing header height
          var percentageComplete = $(this).scrollTop() / triggerDistance; // Percentage complete
          for (var i = 0; i < classesToChange.length; i++) {
            // Cycle through all style changes
            var currentClass = classesToChange[i]; // Store
            var dynamicStyle =
              (1 - percentageComplete) * (currentClass.max - currentClass.min) +
              currentClass.min; // Calculate
            $(currentClass.className).css(
              currentClass.styleElement,
              dynamicStyle
            ); // Apply
          }
        } else {
          // Min style
          for (var i = 0; i < classesToChange.length; i++) {
            var currentClass = classesToChange[i];
            $(currentClass.className).css(
              currentClass.styleElement,
              currentClass.min
            );
          }
        }
        if ($(this).scrollTop() <= 5) {
          // Just in case you scroll too fast - max style
          for (var i = 0; i < classesToChange.length; i++) {
            var currentClass = classesToChange[i];
            $(currentClass.className).css(
              currentClass.styleElement,
              currentClass.max
            );
          }
        }
      } else {
        // If on mobile
        // console.log("Your screen size does not support dynamic header");
      }
    });
  </script>

  <!-- Mobile Client -->
  <div class="mobile-blog-header">
    <ul class="mobile-blog-header-ul">
      <li class="mobile-blog-header-li-logo">
        <a href="http://localhost:4000">
          <img
            src="/media/site/favicon.png"
            class="mobile-blog-header-logo"
          />
        </a>
      </li>
      <li class="mobile-blog-header-li">
        <a href="/">Home</a>
      </li>
      <li class="mobile-blog-header-li">
        <a href="/blog">Blog</a>
      </li>
      <li class="mobile-blog-header-li">
        <a href="/categories">Portfolio</a>
      </li>
      <li class="mobile-blog-header-li">
        <a href="/contact">Contact</a>
      </li>
    </ul>
  </div>
  <div class="mobile-blog-header-placeholder"></div>
</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="post">
  <header class="post-header">
    <h1 class="post-title">amCharts Export</h1>
  </header>

  <article class="post-content">
    <h1 id="amcharts-export">amCharts Export</h1>

<p>Version: 1.4.20</p>

<h2 id="description">Description</h2>

<p>This plugin adds export capabilities to all amCharts products - charts and maps.</p>

<p>It allows annotating and exporting chart or related data to various bitmap,
vector, document or data formats, such as PNG, JPG, PDF, SVG, JSON, XLSX and
many more.</p>

<h2 id="important-notice">Important notice</h2>

<p>Please note that due to security measures implemented in modern browsers, some
or all export options might not work if the web page is loaded locally (via
file:///) or contain images loaded from different host than the web page itself.</p>

<h2 id="usage">Usage</h2>

<h3 id="1-include-the-minified-version-of-file-of-this-plugin-as-well-as-the">1) Include the minified version of file of this plugin as well as the</h3>
<p>bundled CSS file. I.e.:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>&lt;script src="amcharts/plugins/export/export.min.js"&gt;&lt;/script&gt;
&lt;link  type="text/css" href="amcharts/plugins/export/export.css" rel="stylesheet"&gt;
</code></pre>
</div>

<p>Or if you’d rather use amCharts CDN:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>&lt;script src="//cdn.amcharts.com/lib/3/plugins/export/export.min.js"&gt;&lt;/script&gt;
&lt;link  type="text/css" href="//cdn.amcharts.com/lib/3/plugins/export/export.css" rel="stylesheet"&gt;
</code></pre>
</div>

<p>(this needs to go after all the other amCharts includes)</p>

<h3 id="2-enable-export-with-default-options">2) Enable <code class="highlighter-rouge">export</code> with default options:</h3>

<div class="highlighter-rouge"><pre class="highlight"><code>AmCharts.makeChart( "chartdiv", {
  ...,
  "export": {
    "enabled": true
  }
} );
</code></pre>
</div>

<h3 id="-or-set-your-own-custom-options">… OR set your own custom options:</h3>

<div class="highlighter-rouge"><pre class="highlight"><code>AmCharts.makeChart( "chartdiv", {
  ...,
  "export": {
    "enabled": true,
    "menu": [ {
      "class": "export-main",
      "menu": [ {
        "label": "Download",
        "menu": [ "PNG", "JPG", "CSV" ]
      }, {
        "label": "Annotate",
        "action": "draw",
        "menu": [ {
          "class": "export-drawing",
          "menu": [ "PNG", "JPG" ]
        } ]
      } ]
    } ]
  }
} );
</code></pre>
</div>

<h2 id="loading-external-libraries-needed-for-operation-of-this-plugin">Loading external libraries needed for operation of this plugin</h2>

<p>The plugin relies on a number of different libraries, to export images, draw
annotations or generate download files.</p>

<p>Those libraries need to be loaded for the plugin to work properly.</p>

<p>There are two ways to load them. Choose the one that is right:</p>

<h3 id="1-automatic-preferred">1) Automatic (preferred)</h3>

<p>All libraries required for plugin operation are included withing plugins <em>/libs</em>
subdirectory.</p>

<p>The plugin will automatically try to look in chart’s <a href="http://docs.amcharts.com/3/javascriptcharts/AmSerialChart#path"><code class="highlighter-rouge">path</code></a>
property. If your plugin files are located within plugins folder under amcharts
(as is the case with the default distributions), you don’t need to do anything -
the libraries will load on-demand.</p>

<p>If you are using relative url, note that it is relative to the web page you are
displaying your chart on, not the export.js library.</p>

<p>In case you’ve moved the libs folder you need to tell the plugin where it is
<code class="highlighter-rouge">"libs": { "path": "../libs/" }</code></p>

<h3 id="2-manual">2) Manual</h3>

<p>You can also load all those JavaScript libraries by <code class="highlighter-rouge">&lt;script&gt;</code> tags. Since
loading of libraries is on by default you will need to turn it off by setting
<code class="highlighter-rouge">"libs": { "autoLoad": false }</code></p>

<p>Here is a full list of the files that need to be loaded for each operation:</p>

<table>
  <thead>
    <tr>
      <th>File</th>
      <th>Located in</th>
      <th>Required for</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>fabric.min.js</td>
      <td>libs/fabric.js/</td>
      <td>Any export operation</td>
    </tr>
    <tr>
      <td>FileSaver.js</td>
      <td>libs/FileSaver.js/</td>
      <td>Used to offer download files</td>
    </tr>
    <tr>
      <td>pdfmake.min.js</td>
      <td>libs/pdfmake/</td>
      <td>Export to PDF format</td>
    </tr>
    <tr>
      <td>vfs_fonts.js</td>
      <td>libs/pdfmake/</td>
      <td>Export to PDF format</td>
    </tr>
    <tr>
      <td>jszip.js</td>
      <td>libs/jszip/</td>
      <td>Export to XLSX format</td>
    </tr>
    <tr>
      <td>xlsx.js</td>
      <td>libs/xlsx/</td>
      <td>Export to XLSX format</td>
    </tr>
  </tbody>
</table>

<h2 id="complete-list-of-available-export-settings">Complete list of available export settings</h2>

<table>
  <thead>
    <tr>
      <th>Property</th>
      <th>Default</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>backgroundColor</td>
      <td>#FFFFFF</td>
      <td>RGB code of the color for the background of the exported image</td>
    </tr>
    <tr>
      <td>enabled</td>
      <td>true</td>
      <td>Enables or disables export functionality</td>
    </tr>
    <tr>
      <td>divId</td>
      <td> </td>
      <td>ID or a reference to div object in case you want the menu in a separate container.</td>
    </tr>
    <tr>
      <td>fabric</td>
      <td>{}</td>
      <td>Overwrites the default drawing settings (fabricJS library)</td>
    </tr>
    <tr>
      <td>fallback</td>
      <td>{}</td>
      <td>Holds the messages to guide the user to copy the generated output; <code class="highlighter-rouge">false</code> will disable the fallback feature</td>
    </tr>
    <tr>
      <td>fileName</td>
      <td>amCharts</td>
      <td>A file name to use for generated export files (an extension will be appended to it based on the export format)</td>
    </tr>
    <tr>
      <td>legend</td>
      <td>{}</td>
      <td>Places the legend in case it is within an external container (<a href="#adding-external-legend">skip to chapter</a>)</td>
    </tr>
    <tr>
      <td>libs</td>
      <td> </td>
      <td>3rd party required library settings (see the above section)</td>
    </tr>
    <tr>
      <td>menu</td>
      <td>[]</td>
      <td>A list of menu or submenu items (see the next chapter for details)</td>
    </tr>
    <tr>
      <td>pdfMake</td>
      <td>{}</td>
      <td>Overwrites the default settings for PDF export (pdfMake library)</td>
    </tr>
    <tr>
      <td>position</td>
      <td>top-right</td>
      <td>A position of export icon. Possible values: “top-left”, “top-right” (default), “bottom-left”, “bottom-right”</td>
    </tr>
    <tr>
      <td>removeImages</td>
      <td>true</td>
      <td>If true export checks for and removes “tainted” images that area lodead from different domains</td>
    </tr>
    <tr>
      <td>delay</td>
      <td> </td>
      <td>General setting to delay the capturing of the chart (<a href="#delay-the-capturing-before-export">skip to chapter</a>)</td>
    </tr>
    <tr>
      <td>exportFields</td>
      <td>[]</td>
      <td>If set, only fields in this array will be exported ( data export only )</td>
    </tr>
    <tr>
      <td>exportTitles</td>
      <td>false</td>
      <td>Exchanges the data field names with it’s dedicated title ( data export only )</td>
    </tr>
    <tr>
      <td>columnNames</td>
      <td>{}</td>
      <td>An object of key/value pairs to use as column names when exporting to data formats. <code class="highlighter-rouge">exportTitles</code> needs to be set for this to work as well.</td>
    </tr>
    <tr>
      <td>exportSelection</td>
      <td>false</td>
      <td>Exports the current data selection only ( data export only )</td>
    </tr>
    <tr>
      <td>dataDateFormat</td>
      <td> </td>
      <td>Format to convert date strings to date objects, uses by default charts dataDateFormat ( data export only )</td>
    </tr>
    <tr>
      <td>dateFormat</td>
      <td>YYYY-MM-DD</td>
      <td>Formats the category field in given date format ( data export only )</td>
    </tr>
    <tr>
      <td>keyListener</td>
      <td>false</td>
      <td>If true it observes the pressed keys to undo/redo the annotations</td>
    </tr>
    <tr>
      <td>fileListener</td>
      <td>false</td>
      <td>If true it observes the drag and drop feature and loads the dropped image file into the annotation</td>
    </tr>
    <tr>
      <td>drawing</td>
      <td>{}</td>
      <td>Object which holds all possible settings for the annotation mode (<a href="#annotation-settings">skip to chapter</a>)</td>
    </tr>
    <tr>
      <td>overflow</td>
      <td>true</td>
      <td>Flag to overwrite the css attribute ‘overflow’ of the chart container to avoid cropping the menu on small container</td>
    </tr>
    <tr>
      <td>border</td>
      <td>{}</td>
      <td>An object of key/value pairs to define the overlaying border</td>
    </tr>
    <tr>
      <td>processData</td>
      <td> </td>
      <td>A function which can be used to change the dataProvider when exporting to CSV, XLSX, or JSON</td>
    </tr>
  </tbody>
</table>

<h2 id="configuring-export-menu">Configuring export menu</h2>

<p>Plugin includes a way to completely control what is displayed on export menu.
You can set up menus, sub-menus, down to any level. You can even add custom
items there that execute your arbitrary code on click. It’s so configurable
it makes us sick with power ;)</p>

<p>The top-level menu is configured via <code class="highlighter-rouge">menu</code> property under <code class="highlighter-rouge">export</code>. It should
always be an array, even if you have a single item in it.</p>

<p>The array items could be either objects or format codes. Objects will allow you
to specify labels, action, icon, child items and even custom code to be executed
on click.</p>

<p>Simple format codes will assume you need an export to that format.</p>

<h3 id="simple-menu-setup">Simple menu setup</h3>

<p>Here’s a sample of the simple menu setup that allows export to PNG, JPG and CSV:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>"export": {
  "enabled": true,
  "menu": [ {
    "class": "export-main",
    "menu": [ "PNG", "JPG", "CSV" ]
  } ]
}
</code></pre>
</div>

<p>The above will display a menu out of three options when you hover on export
icon:</p>

<ul>
  <li>PNG</li>
  <li>JPG</li>
  <li>CSV</li>
</ul>

<p>When clicked the plugin will trigger export to a respective format.</p>

<p>If that is all you need, you’re all set.</p>

<p>Please note that we have wrapped out menu into another menu item, so that only
the icon is displayed until we roll over the icon. This means that technically
we have a two-level hierarchical menu.</p>

<p>If we opmitted that first step, the chart would simply display a format list
right there on the chart.</p>

<h3 id="advanced-menu-setup">Advanced menu setup</h3>

<p>However, you can do so much more with the menu.</p>

<p>Let’s add more formats and organize image and data formats into separate
submenus.</p>

<p>To add a submenu to a menu item, simply add a <code class="highlighter-rouge">menu</code> array as its own property:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>"export": {
  "enabled": true,
  "menu": [ {
    "class": "export-main",
    "menu": [ {
      "label": "Download as image",
      "menu": [ "PNG", "JPG", "SVG" ]
    }, {
      "label": "Download data",
      "menu": [ "CSV", "XLSX" ]
    } ]
  } ]
}
</code></pre>
</div>

<p>Now we have a hierarchical menu with the following topology:</p>

<ul>
  <li>Download as image
    <ul>
      <li>PNG</li>
      <li>JPG</li>
      <li>SVG</li>
    </ul>
  </li>
  <li>Download data
    <ul>
      <li>CSV</li>
      <li>XLSX</li>
    </ul>
  </li>
</ul>

<p>We can mix “string” and “object” formats the way we see fit, i.e.:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>"export": {
  "menu": [
    "PNG",
    { "label": "JPEG",
      "format": "JPG" },
    "SVG"
  ]
}
</code></pre>
</div>

<p>The magic does not end here, though.</p>

<h3 id="adding-custom-click-events-to-menu-items">Adding custom click events to menu items</h3>

<p>Just like we set <code class="highlighter-rouge">label</code> and <code class="highlighter-rouge">format</code> properties for menu item, we can set
<code class="highlighter-rouge">click</code> as well.</p>

<p>This needs to be a function reference. I.e.:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>"export": {
  "menu": [
    "PNG",
    { "label": "JPEG",
      "click": function () {
        alert( "Clicked JPEG. Wow cool!" );
      } },
    "SVG"
  ]
}
</code></pre>
</div>

<h3 id="adding-external-legend">Adding external legend</h3>

<p>In case you have an external legend you need to define the position where it should get placed in your export.
By default it obtains the dimensions from the container but you can optionally overwrite those settings as shown below.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>"export": {
  "legend": {
    "position": "top",  // or "right", "bottom" and "left" are possible
    "width": 200,       // optional
    "height": 200       // optional
  }
}
</code></pre>
</div>

<h3 id="changing-the-dataprovider-when-exporting">Changing the dataProvider when exporting</h3>

<p>If you want to change the dataProvider when exporting to CSV, XLSX, or JSON, you can use the <code class="highlighter-rouge">processData</code> option:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>"export": {
  "processData": function (data) {
    return data.slice(1, -1);
  }
}
</code></pre>
</div>

<h3 id="adding-overlaying-border">Adding overlaying border</h3>

<p>In case you need a more visible separation of your chart for further processing you can add an overlaying border.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>"export": {
  "border": {
    "stroke": "#000000",  // HEX-CODE to define the border color
    "strokeWidth": 1,     // number which represents the width in pixel
    "strokeOpacity": 1    // number which controls the opacity from 0 - 1
  }
}
</code></pre>
</div>

<h3 id="menu-item-reviver">Menu item reviver</h3>

<p>By passing the <code class="highlighter-rouge">menuReviver</code> callback function you can modify the resulting menu
item or relative container, before it gets appended to the list (<code class="highlighter-rouge">ul</code>). The
function takes two arguments and it needs to return a valid DOM element.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>"export": {
  "menuReviver": function(item,li) {
    li.setAttribute("class","something special");
    return li;
  }
}
</code></pre>
</div>

<h4 id="format-specific-options-that-you-can-override-using-menu-item-reviver">Format specific options that you can override using Menu item reviver</h4>

<p>Some formats, such as CSV, have specific parameters that are used when exporting to this format. For example, default column separator for CSV is a comma. But what if you would like to be that a tab? You could use <code class="highlighter-rouge">menuReviver</code> for that like this:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>"export": {
  "enabled": true,
  "menuReviver": function(cfg,li) {
    if ( cfg.format == "CSV" ) {
      cfg.delimiter = "\t";
    }
    return li;
  }
}
</code></pre>
</div>

<p>Below you will find a list of parameters that you can override for each format:</p>

<p><strong>JPG</strong></p>

<table>
  <thead>
    <tr>
      <th>Property</th>
      <th>Default</th>
      <th>Available values</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>quality</td>
      <td>1</td>
      <td>0-1</td>
      <td>A quality of the resulting JPG image</td>
    </tr>
    <tr>
      <td>multiplier</td>
      <td>1</td>
      <td>number</td>
      <td>Set this to non-1 number to resize the resulting image by</td>
    </tr>
  </tbody>
</table>

<p><strong>PNG</strong></p>

<table>
  <thead>
    <tr>
      <th>Property</th>
      <th>Default</th>
      <th>Available values</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>quality</td>
      <td>1</td>
      <td>0-1</td>
      <td>A quality of the resulting JPG image</td>
    </tr>
    <tr>
      <td>multiplier</td>
      <td>1</td>
      <td>number</td>
      <td>Set this to non-1 number to resize the resulting image by</td>
    </tr>
  </tbody>
</table>

<p><strong>PDF</strong></p>

<table>
  <thead>
    <tr>
      <th>Property</th>
      <th>Default</th>
      <th>Available values</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>multiplier</td>
      <td>2</td>
      <td>number</td>
      <td>Set this to non-1 number to resize the resulting image by</td>
    </tr>
  </tbody>
</table>

<p><strong>PRINT</strong></p>

<table>
  <thead>
    <tr>
      <th>Property</th>
      <th>Default</th>
      <th>Available values</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>delay</td>
      <td>1</td>
      <td>number</td>
      <td>Delay by number of seconds before triggering print</td>
    </tr>
    <tr>
      <td>lossless</td>
      <td>false</td>
      <td>true/false</td>
      <td>Enable or disable image optimization when printing</td>
    </tr>
  </tbody>
</table>

<p><strong>CSV</strong></p>

<table>
  <thead>
    <tr>
      <th>Property</th>
      <th>Default</th>
      <th>Available values</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>delimiter</td>
      <td>”,”</td>
      <td>string</td>
      <td>A string to use as a column delimiter</td>
    </tr>
    <tr>
      <td>quotes</td>
      <td>true</td>
      <td>true/false</td>
      <td>Set whether to enclose strings in doublequotes</td>
    </tr>
    <tr>
      <td>escape</td>
      <td>true</td>
      <td>true/false</td>
      <td>Set whether to escape strings</td>
    </tr>
    <tr>
      <td>withHeader</td>
      <td>true</td>
      <td>true/false</td>
      <td>Add header row with column names</td>
    </tr>
  </tbody>
</table>

<p><strong>XLSX</strong></p>

<table>
  <thead>
    <tr>
      <th>Property</th>
      <th>Default</th>
      <th>Available values</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>dateFormat</td>
      <td>“dateObject”</td>
      <td>“dateObject”|”string”</td>
      <td>Whether to export dates as dates recognisable by Excel or formatted as strings</td>
    </tr>
    <tr>
      <td>withHeader</td>
      <td>true</td>
      <td>true/false</td>
      <td>Add header row with column names</td>
    </tr>
    <tr>
      <td>stringify</td>
      <td>false</td>
      <td>true/false</td>
      <td>Convert all cell content to strings</td>
    </tr>
  </tbody>
</table>

<h3 id="menu-walker">Menu walker</h3>

<p>In case you don’t like our structure, go ahead and write your own recursive
function to create the menu by the given list configured through <code class="highlighter-rouge">menu</code>.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>"export": {
  "menuWalker": function(list,container) {
    // some magic to generate the nested lists using the given list
  }
}
</code></pre>
</div>

<h3 id="printing-the-chart">Printing the chart</h3>

<p>Adding menu item to print the chart or map is as easy as adding export ones. You
just use “PRINT” as <code class="highlighter-rouge">format</code>. I.e.:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>"export": {
  "menu": [
    "PNG",
    "SVG",
    "PRINT"
  ]
}
</code></pre>
</div>

<p>Or if you want to change the label:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>"export": {
  "menu": [
    "PNG",
    "SVG",
    {
      "format": "PRINT",
      "label": "Print Chart"
    }
  ]
}
</code></pre>
</div>

<h3 id="annotating-the-chart-before-export">Annotating the chart before export</h3>

<p>OK, this one is so cool, you’ll need a class 700 insulation jacket.</p>

<p>By default each menu item triggers some kind of export. You can trigger an
“annotation” mode instead by including <code class="highlighter-rouge">"action": "draw"</code> instead.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>"export": {
  "menu": [ {
    "class": "export-main",
    "menu": [ {
      "label": "Download",
      "menu": [ "PNG", "JPG", "CSV", "XLSX" ]
    }, {
      "label": "Annotate",
      "action": "draw"
    } ]
  } ]
}
</code></pre>
</div>

<p>Now, when you click on the “Annotate” item in the menu, the chart will turn into
an image editor which you can actual draw on and the menu gets replaced by the
default annotation menu.</p>

<p>If you don’t like the detault annotation menu, you can define your own:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>"export": {
  "menu": [ {
    "class": "export-main",
    "menu": [ {
      "label": "Download",
      "menu": [ "PNG", "JPG", "CSV", "XLSX" ]
    }, {
      "label": "Annotate",
      "action": "draw",
      "menu": [ {
        "class": "export-drawing",
        "menu": [ "JPG", "PNG", "SVG", "PDF" ]
      } ]
    } ]
  } ]
}
</code></pre>
</div>

<p>Now, when you turn on the annotation mode, your own submenu will display,
allowing to export the image into either PNG, JPG, SVG or PDF.</p>

<p>And that’s not even the end of it. You can add menu items to cancel, undo, redo
and still be able to reuse the choices by using the actions <code class="highlighter-rouge">draw.modes</code>,
<code class="highlighter-rouge">draw.widths</code>, <code class="highlighter-rouge">draw.colors</code> or <code class="highlighter-rouge">draw.shapes</code>.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>"export": {
  "menu": [ {
    "class": "export-main",
    "menu": [ {
      "label": "Download",
      "menu": [ "PNG", "JPG", "CSV", "XLSX" ]
    }, {
      "label": "Annotate",
      "action": "draw",
      "menu": [ {
        "class": "export-drawing",
        "menu": [ {
            label: "Size ...",
            action: "draw.widths",
            widths: [ 5, 20, 30 ] // replaces the default choice
        }, {
          "label": "Edit",
          "menu": [ "UNDO", "REDO", "CANCEL" ]
        }, {
          "label": "Save",
          "format": "PNG"
        } ]
      } ]
    } ]
  } ]
}
</code></pre>
</div>

<h3 id="annotation-settings">Annotation settings</h3>

<p>Since 1.2.1 it’s also possible to set some of the annotation options without the
need to re-define the whole menu structure. You can easily adjust the choice of
modes, colors, widths or shapes, and set the defaults when entering the
annotation mode.</p>

<p>Following setup shows you all available settings. If you don’t have the
<code class="highlighter-rouge">drawing</code> property at all, it will falls back to the defaults.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>"export": {
  "drawing": {
    "enabled": true, // Flag for `action: "draw"` menu items to toggle it's visibility
    "shapes": [ "test.svg" ], // Choice of shapes offered in the menu (shapes are being loaded from the shapes folder)

    "width": 2, // Width of the pencil and line when entering the annotation mode
    "widths": [ 2, 10, 20 ], // Choice of widths offered in the menu

    "color": "#000000", // Color of the pencil, line, text and shapes when entering the annotation mode
    "colors": [ "#000000", "#FF0000" ] // Choice of colors offered in the menu

    "opacity": 1, // Opacity of the pencil, line, text and shapes when entering the annotation mode
    "opacities": [ 1, 0.8, 0.6, 0.4, 0.2 ] // Choice of opacity offered in the menu

    "menu": [ ... ], // Shown menu when entering the annotation mode

    "mode": "pencil", // Drawing mode when entering the annotation mode "pencil", "line" and "arrow" are available
    "modes": [ "pencil" , "line", "arrow" ], // Choice of modes offered in the menu
    "arrow": "end", // position of the arrow on drawn lines; "start","middle" and "end" are available

    "autoClose": true // Flag to automatically close the annotation mode after download
  }
}
</code></pre>
</div>

<p>If you need to filter the drawn elements, you can pass the <code class="highlighter-rouge">reviver</code> method in
your global configuration, or pass it to the <code class="highlighter-rouge">capture</code> method if you export
manually. For example, to hide all free labels you can simply do something like
the following:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>"export": {
  "menu": ["PNG"],
  "reviver": function(obj) {
    if ( obj.className == "amcharts-label" ) {
      obj.opacity = 0;
    }
  }
}
</code></pre>
</div>

<h3 id="delay-the-capturing-before-export">Delay the capturing before export</h3>

<p>In some cases you may want to delay the capturing of the current chart snapshot
to highlight the current value. For this you can simply define the ‘delay’
property in your menu item:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>"export": {
  "delay": 3,

  // or specifically on individual menu items

  "menu": [{
    "label": "PNG",
    "format": "PNG",
    "delay": 3
  }]
}
</code></pre>
</div>

<h3 id="events">Events</h3>

<p>Since version 1.1.7 the plugin introduces some events you can use. For example
the <code class="highlighter-rouge">afterCapture</code> event allows you to add some texts or images which can’t be
seen on the regular chart but only the generated export. Use it to watermark
your exported images.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>"export": {
  "afterCapture": function(menuConfig) {
      var text = new fabric.Text("This is shown on exported image only", {
        top: 50,
        left: 100,
        family: this.setup.chart.fontFamily,
        size: this.setup.chart.fontSize * 2
      });
      this.setup.fabric.add(text);
  },

  // or specifically on individual menu items

  "menu": [{
    "label": "PNG",
    "format": "PNG",  
    "afterCapture": function(menuConfig) {
        var text = new fabric.Text("This is shown on exported image only", {
          top: 50,
          left: 100,
          family: this.setup.chart.fontFamily,
          size: this.setup.chart.fontSize * 2
        });
        this.setup.fabric.add(text);
    }
  }]
}
</code></pre>
</div>

<h3 id="a-list-of-the-events">A list of the events</h3>

<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Arguments</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>beforeCapture</td>
      <td><a href="#a-list-of-menu-item-properties">menu item setup</a></td>
      <td>Called before the SVG element gets converted</td>
    </tr>
    <tr>
      <td>afterCapture</td>
      <td><a href="#a-list-of-menu-item-properties">menu item setup</a></td>
      <td>Called right before the passed callback of the capture method</td>
    </tr>
  </tbody>
</table>

<h3 id="a-list-of-menu-item-properties">A list of menu item properties</h3>

<table>
  <thead>
    <tr>
      <th>Property</th>
      <th>Description</th>
      <th> </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>action</td>
      <td>Set to “draw” if you want the item to trigger annotation mode</td>
      <td> </td>
    </tr>
    <tr>
      <td>class</td>
      <td>Class name applied to the tag</td>
      <td> </td>
    </tr>
    <tr>
      <td>click</td>
      <td>Function handler invoked upon click on menu item</td>
      <td> </td>
    </tr>
    <tr>
      <td>format</td>
      <td>A format to export chart/map to upon click (see below for a list of available formats)</td>
      <td> </td>
    </tr>
    <tr>
      <td>icon</td>
      <td>Icon file (will use chart’s <a href="http://docs.amcharts.com/3/javascriptcharts/AmSerialChart#path">path</a> if the URL is not full)</td>
      <td> </td>
    </tr>
    <tr>
      <td>label</td>
      <td>Text label to be displayed</td>
      <td> </td>
    </tr>
    <tr>
      <td>menu</td>
      <td>An array of submenu items</td>
      <td> </td>
    </tr>
    <tr>
      <td>title</td>
      <td>A title attribute of the link</td>
      <td> </td>
    </tr>
    <tr>
      <td>backgroundColor</td>
      <td>The background color of the canvas</td>
      <td> </td>
    </tr>
    <tr>
      <td>fileName</td>
      <td>A file name to use for generated export files (an extension will be appended to it based on the export format)</td>
      <td> </td>
    </tr>
    <tr>
      <td>extension</td>
      <td>File extension for the generated export file (uses format default if not defined)</td>
      <td> </td>
    </tr>
    <tr>
      <td>mimeType</td>
      <td>Internet media type to generate the export file (usses format default if not defined)</td>
      <td> </td>
    </tr>
    <tr>
      <td>pageSize</td>
      <td>A string or { width: number, height: number } (<a href="#exporting-to-pdf">details</a>)</td>
      <td> </td>
    </tr>
    <tr>
      <td>pageOrientation</td>
      <td>By default we use portrait, you can change it to landscape if you wish (<a href="#exporting-to-pdf">details</a>)</td>
      <td> </td>
    </tr>
    <tr>
      <td>pageMargins</td>
      <td>[left, top, right, bottom] or [horizontal, vertical] or just a number for equal margins (<a href="#exporting-to-pdf">details</a>)</td>
      <td> </td>
    </tr>
    <tr>
      <td>content</td>
      <td>Array of elements which represents the content (<a href="#exporting-to-pdf">details</a>)</td>
      <td> </td>
    </tr>
    <tr>
      <td>multiplier</td>
      <td>Scale factor for the generated image</td>
      <td> </td>
    </tr>
    <tr>
      <td>lossless</td>
      <td>Flag to print the actual vector graphic instead of buffered bitmap (print option only, experimental)</td>
      <td> </td>
    </tr>
    <tr>
      <td>delay</td>
      <td>A numeric value to delay the capturing in seconds (<a href="#delay-the-capturing-before-export">details</a>)</td>
      <td> </td>
    </tr>
    <tr>
      <td>exportFields</td>
      <td>[]</td>
      <td>If set, only fields in this array will be exported ( data export only )</td>
    </tr>
    <tr>
      <td>exportTitles</td>
      <td>Exchanges the data field names with it’s dedicated title ( data export only )</td>
      <td> </td>
    </tr>
    <tr>
      <td>columnNames</td>
      <td>An object of key/value pairs to use as column names when exporting ( data export only )</td>
      <td> </td>
    </tr>
    <tr>
      <td>exportSelection</td>
      <td>Exports the current data selection only ( data export only )</td>
      <td> </td>
    </tr>
    <tr>
      <td>dataDateFormat</td>
      <td>Format to convert date strings to date objects, uses by default charts dataDateFormat ( data export only )</td>
      <td> </td>
    </tr>
    <tr>
      <td>dateFormat</td>
      <td>Formats the category field in given date format ( data export only )</td>
      <td> </td>
    </tr>
    <tr>
      <td>border</td>
      <td>An object of key/value pairs to define the overlaying border</td>
      <td> </td>
    </tr>
  </tbody>
</table>

<p>Available <code class="highlighter-rouge">format</code> values:</p>

<ul>
  <li>JPG</li>
  <li>PNG</li>
  <li>SVG</li>
  <li>CSV</li>
  <li>JSON</li>
  <li>PDF</li>
  <li>XLSX</li>
  <li>PRINT</li>
</ul>

<h3 id="exporting-to-pdf">Exporting to PDF</h3>

<p>When exporting to PDF, you can set and modify the content of the resulting
document. I.e. add additional text and/or modify image size, etc.</p>

<p>To do that, you can use menu item’s <code class="highlighter-rouge">content</code> property.</p>

<p>Each item in <code class="highlighter-rouge">content</code> represents either a text line (string) or an exported
image.</p>

<p>To add a text line, simply use a string. It can even be a JavaScript variable or
a function that returns a string.</p>

<p>To include exported image, use <code class="highlighter-rouge">image: "reference"</code>.</p>

<p>Additionally, you can add <code class="highlighter-rouge">fit</code> property which is an array of pixel dimensions,
you want the image to be scaled to fit into.</p>

<p>Here’s an example of such export menu item:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"format"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PDF"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"content"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="s2">"Saved from:"</span><span class="p">,</span><span class="w"> </span><span class="err">window.location.href</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"image"</span><span class="p">:</span><span class="w"> </span><span class="s2">"reference"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"fit"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="mf">523.28</span><span class="p">,</span><span class="w"> </span><span class="mf">769.89</span><span class="w"> </span><span class="p">]</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">fit</span><span class="w"> </span><span class="err">image</span><span class="w"> </span><span class="err">to</span><span class="w"> </span><span class="err">A</span><span class="mi">4</span><span class="w">
  </span><span class="p">}</span><span class="w"> </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<table>
  <thead>
    <tr>
      <th>Property</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>pageSize</td>
      <td>a string or { width: number, height: number }</td>
    </tr>
    <tr>
      <td>pageOrientation</td>
      <td>by default we use portrait, you can change it to landscape if you wish</td>
    </tr>
    <tr>
      <td>pageMargins</td>
      <td>[left, top, right, bottom] or [horizontal, vertical] or just a number for equal margins</td>
    </tr>
    <tr>
      <td>content</td>
      <td>array of elements which represents the content (<a href="https://github.com/bpampuch/pdfmake/">full description</a>)</td>
    </tr>
  </tbody>
</table>

<table>
  <thead>
    <tr>
      <th>Pagesize</th>
      <th>Dimensions in pixel</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>4A0</td>
      <td>[4767.87, 6740.79]</td>
    </tr>
    <tr>
      <td>2A0</td>
      <td>[3370.39, 4767.87]</td>
    </tr>
    <tr>
      <td>A0</td>
      <td>[2383.94, 3370.39]</td>
    </tr>
    <tr>
      <td>A1</td>
      <td>[1683.78, 2383.94]</td>
    </tr>
    <tr>
      <td>A2</td>
      <td>[1190.55, 1683.78]</td>
    </tr>
    <tr>
      <td>A3</td>
      <td>[841.89, 1190.55]</td>
    </tr>
    <tr>
      <td>A4</td>
      <td>[595.28, 841.89]</td>
    </tr>
    <tr>
      <td>A5</td>
      <td>[419.53, 595.28]</td>
    </tr>
    <tr>
      <td>A6</td>
      <td>[297.64, 419.53]</td>
    </tr>
    <tr>
      <td>A7</td>
      <td>[209.76, 297.64]</td>
    </tr>
    <tr>
      <td>A8</td>
      <td>[147.40, 209.76]</td>
    </tr>
    <tr>
      <td>A9</td>
      <td>[104.88, 147.40]</td>
    </tr>
    <tr>
      <td>A10</td>
      <td>[73.70, 104.88]</td>
    </tr>
    <tr>
      <td>B0</td>
      <td>[2834.65, 4008.19]</td>
    </tr>
    <tr>
      <td>B1</td>
      <td>[2004.09, 2834.65]</td>
    </tr>
    <tr>
      <td>B2</td>
      <td>[1417.32, 2004.09]</td>
    </tr>
    <tr>
      <td>B3</td>
      <td>[1000.63, 1417.32]</td>
    </tr>
    <tr>
      <td>B4</td>
      <td>[708.66, 1000.63]</td>
    </tr>
    <tr>
      <td>B5</td>
      <td>[498.90, 708.66]</td>
    </tr>
    <tr>
      <td>B6</td>
      <td>[354.33, 498.90]</td>
    </tr>
    <tr>
      <td>B7</td>
      <td>[249.45, 354.33]</td>
    </tr>
    <tr>
      <td>B8</td>
      <td>[175.75, 249.45]</td>
    </tr>
    <tr>
      <td>B9</td>
      <td>[124.72, 175.75]</td>
    </tr>
    <tr>
      <td>B10</td>
      <td>[87.87, 124.72]</td>
    </tr>
    <tr>
      <td>C0</td>
      <td>[2599.37, 3676.54]</td>
    </tr>
    <tr>
      <td>C1</td>
      <td>[1836.85, 2599.37]</td>
    </tr>
    <tr>
      <td>C2</td>
      <td>[1298.27, 1836.85]</td>
    </tr>
    <tr>
      <td>C3</td>
      <td>[918.43, 1298.27]</td>
    </tr>
    <tr>
      <td>C4</td>
      <td>[649.13, 918.43]</td>
    </tr>
    <tr>
      <td>C5</td>
      <td>[459.21, 649.13]</td>
    </tr>
    <tr>
      <td>C6</td>
      <td>[323.15, 459.21]</td>
    </tr>
    <tr>
      <td>C7</td>
      <td>[229.61, 323.15]</td>
    </tr>
    <tr>
      <td>C8</td>
      <td>[161.57, 229.61]</td>
    </tr>
    <tr>
      <td>C9</td>
      <td>[113.39, 161.57]</td>
    </tr>
    <tr>
      <td>C10</td>
      <td>[79.37, 113.39]</td>
    </tr>
    <tr>
      <td>RA0</td>
      <td>[2437.80, 3458.27]</td>
    </tr>
    <tr>
      <td>RA1</td>
      <td>[1729.13, 2437.80]</td>
    </tr>
    <tr>
      <td>RA2</td>
      <td>[1218.90, 1729.13]</td>
    </tr>
    <tr>
      <td>RA3</td>
      <td>[864.57, 1218.90]</td>
    </tr>
    <tr>
      <td>RA4</td>
      <td>[609.45, 864.57]</td>
    </tr>
    <tr>
      <td>SRA0</td>
      <td>[2551.18, 3628.35]</td>
    </tr>
    <tr>
      <td>SRA1</td>
      <td>[1814.17, 2551.18]</td>
    </tr>
    <tr>
      <td>SRA2</td>
      <td>[1275.59, 1814.17]</td>
    </tr>
    <tr>
      <td>SRA3</td>
      <td>[907.09, 1275.59]</td>
    </tr>
    <tr>
      <td>SRA4</td>
      <td>[637.80, 907.09]</td>
    </tr>
    <tr>
      <td>EXECUTIVE</td>
      <td>[521.86, 756.00]</td>
    </tr>
    <tr>
      <td>FOLIO</td>
      <td>[612.00, 936.00]</td>
    </tr>
    <tr>
      <td>LEGAL</td>
      <td>[612.00, 1008.00]</td>
    </tr>
    <tr>
      <td>LETTER</td>
      <td>[612.00, 792.00]</td>
    </tr>
    <tr>
      <td>TABLOID</td>
      <td>[792.00, 1224.00]</td>
    </tr>
  </tbody>
</table>

<h2 id="styling-the-export-menu">Styling the export menu</h2>

<p>The plugin comes with a default CSS file <code class="highlighter-rouge">export.css</code>. You just need to include
it on your page.</p>

<p>Feel free to override any styles defined in it, create your own version and
modify as you see fit.</p>

<p>If you choose to modify it, we suggest creating a copy so it does not get
overwritten when you update amCharts or plugin.</p>

<h2 id="plugin-api">Plugin API</h2>

<p>We explained how you can define custom functions to be executed on click on
export menu items.</p>

<p>Those functions can tap into plugin’s methods to augment it with some custom
functionality.</p>

<p>Here’s an example:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>"export": {
  menu: [ {
    label: "JPG",
    click: function() {
      this.capture({},function() {
        this.toJPG( {}, function( data ) {
          this.download( data, "image/jpg", "amCharts.jpg" );
        });
      });
    }
  } ]
}
</code></pre>
</div>

<p>The above will use plugin’s internal <code class="highlighter-rouge">capture</code> method to capture it’s current
state and <code class="highlighter-rouge">toJPG()</code> method to export the chart to JPEG format.</p>

<p>Yes, you’re right, it’s the exact equivalent of just including “JPG” string. The
code is here for the explanatory purposes.</p>

<p>Here’s a full list of API functions available for your consumption:</p>

<table>
  <thead>
    <tr>
      <th>Function</th>
      <th>Parameters</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>toJPG</td>
      <td>(object) options, (function) callback</td>
      <td>Prepares a JPEG representation of the chart and passes the binary data to the callback function</td>
    </tr>
    <tr>
      <td>toPNG</td>
      <td>(object) options, (function) callback</td>
      <td>Prepares a PNG representation of the chart and passes the binary data to the callback function</td>
    </tr>
    <tr>
      <td>toSVG</td>
      <td>(object) options, (function) callback</td>
      <td>Prepares a SVG representation of the chart and passes the binary data to the callback function</td>
    </tr>
    <tr>
      <td>toPDF</td>
      <td>(object) options, (function) callback</td>
      <td>Prepares a PDF representation of the chart and passes the binary data to the callback function</td>
    </tr>
    <tr>
      <td>toJSON</td>
      <td>(object) options, (function) callback</td>
      <td>Prepares a JSON and passes the plain data to the callback function</td>
    </tr>
    <tr>
      <td>toCSV</td>
      <td>(object) options, (function) callback</td>
      <td>Prepares a CSV and passes the plain data to the callback function</td>
    </tr>
    <tr>
      <td>toXLSX</td>
      <td>(object) options, (function) callback</td>
      <td>Prepares a XLSX representation of the chart and passes the binary data to the callback function</td>
    </tr>
    <tr>
      <td>toBlob</td>
      <td>(object) options, (function) callback</td>
      <td>Prepares a BLOB and passes the instance to the callback function</td>
    </tr>
    <tr>
      <td>toCanvas</td>
      <td>(object) options, (function) callback</td>
      <td>Prepares a Canvas and passes the element to the callback function</td>
    </tr>
    <tr>
      <td>toArray</td>
      <td>(object) options, (function) callback</td>
      <td>Prepares an Array and passes the data to the callback function</td>
    </tr>
    <tr>
      <td>toImage</td>
      <td>(object) options, (function) callback</td>
      <td>Generates an image element which holds the output in an embedded base64 data url</td>
    </tr>
  </tbody>
</table>

<h2 id="fallback-for-ie9">Fallback for IE9</h2>

<p>Unfortunately, Internet Explorer 9 has restrictions in place that prevent the
download of locally-generated files. In this case the plugin will place the
generated image along download instructions directly over the chart area.</p>

<p>To avoid having a bigger payload by including senseless polyfills to your site,
you may need to add following metatag in your <code class="highlighter-rouge">&lt;head&gt;</code> of your HTML document.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>&lt;meta http-equiv="X-UA-Compatible" content="IE=edge" /&gt;
</code></pre>
</div>

<p>This feature will kick in by default. If you want to disable it simply pass
<code class="highlighter-rouge">false</code> to the <code class="highlighter-rouge">fallback</code> parameter.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>"export": {
  fallback: false
}
</code></pre>
</div>

<p>In case you want to change our default messages you can modify it like
following.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>"export": {
  fallback: {
    text: "CTRL + C to copy the data into the clipboard.",
    image: "Rightclick -&gt; Save picture as... to save the image."
  }
}
</code></pre>
</div>

<h2 id="requirements">Requirements</h2>

<p>This plugin requires at least 3.13 version of JavaScript Charts, JavaScript
Stock Chart or JavaScript Maps.</p>

<p>The export will also need relatively recent browsers.</p>

<p>IE10 and up are supported.</p>

<p>Partial support for IE9; Fallback mechanism.</p>

<p>IE8 and older are not supported I’m afraid. Hey, it’s time to upgrade!</p>

<h2 id="demos">Demos</h2>

<p>They’re all in subdirectory /examples.</p>

<h2 id="extending-this-plugin">Extending this plugin</h2>

<p>You’re encouraged to modify, extend and make derivative plugins out of this
plugin.</p>

<p>You can modify files, included in this archive or, better yet, fork this project
on GitHub:</p>

<p>https://github.com/amcharts/export</p>

<p>We’re curious types. Please let us know (contact@amcharts.com) if you do create
something new out of this plugin.</p>

<h2 id="license">License</h2>

<p>This plugin is licensed under Apache License 2.0.</p>

<p>This basically means you’re free to use or modify this plugin, even make your
own versions or completely different products out of it.</p>

<p>Please see attached file “license.txt” for the complete license or online here:</p>

<p>http://www.apache.org/licenses/LICENSE-2.0</p>

<h2 id="contact-us">Contact us</h2>

<ul>
  <li>Email:contact@amcharts.com</li>
  <li>Web: http://www.amcharts.com/</li>
  <li>Facebook: https://www.facebook.com/amcharts</li>
  <li>Twitter: https://twitter.com/amcharts</li>
</ul>

<h2 id="changelog">Changelog</h2>

<h3 id="1420">1.4.20</h3>
<ul>
  <li>Fixed: Issue with disappearing images in PDFs caused by exceeding boundary box for images</li>
</ul>

<h3 id="1419">1.4.19</h3>
<ul>
  <li>Fixed: Issue with radial gradient</li>
</ul>

<h3 id="1418">1.4.18</h3>
<ul>
  <li>Fixed: Issue with the legend positioning on the left side</li>
</ul>

<h3 id="1417">1.4.17</h3>
<ul>
  <li>Fixed: <code class="highlighter-rouge">clip-path</code> issue on XY serial charts which exposed the drawn line beyond the plotarea.</li>
</ul>

<h3 id="1416">1.4.16</h3>
<ul>
  <li>Added: (<a href="#changing-the-dataprovider-when-exporting">processData</a>) config-property to change the dataProvider when exporting.</li>
</ul>

<h3 id="1415">1.4.15</h3>
<ul>
  <li>Fixed: Menu items obtain the global <code class="highlighter-rouge">multiplier</code> setting to scale the output image.</li>
</ul>

<h3 id="1414">1.4.14</h3>
<ul>
  <li>Added: (<a href="#adding-overlaying-border">border</a>) config-property to add an overlaying border on the output image.</li>
</ul>

<h3 id="1413">1.4.13</h3>
<ul>
  <li>Fixed: Issue on balloons showing it’s content as HTML added “textContent” as alternative getter</li>
</ul>

<h3 id="1412">1.4.12</h3>
<ul>
  <li>Fixed: clipPath issue on SVG export (workaround until fabricJS handles that by themselves)</li>
</ul>

<h3 id="1411">1.4.11</h3>
<ul>
  <li>Fixed: Depth issue on value labels on columns</li>
</ul>

<h3 id="1410">1.4.10</h3>
<ul>
  <li>Fixed: potential vulnerability with anonymous function declaration</li>
</ul>

<h3 id="149">1.4.9</h3>
<ul>
  <li>Added: Radial gradient support on pie charts (new feature in amCharts v3.18.0)</li>
</ul>

<h3 id="148">1.4.8</h3>
<ul>
  <li>Fixed: Clippath positioning issue</li>
  <li>Fixed: Issue removing tainted images</li>
  <li>Fixed: Hashbanged url interpretation issue in IE (related to reusable svg nodes)</li>
</ul>

<h3 id="147">1.4.7</h3>
<ul>
  <li>Fixed: Zeroes were being exported to data formats as empty strings rather than numbers</li>
</ul>

<h3 id="146">1.4.6</h3>
<ul>
  <li>Fixed: Loading issue with patterns in firefox</li>
</ul>

<h3 id="145">1.4.5</h3>
<ul>
  <li>Fixed: Issue with the “canvas-container” on chart revalidations</li>
</ul>

<h3 id="144">1.4.4</h3>
<ul>
  <li>Added: Balloon text orientation</li>
  <li>Fixed: Issue with multiline label positioning</li>
</ul>

<h3 id="143">1.4.3</h3>
<ul>
  <li>Added: <code class="highlighter-rouge">exportFields</code> option which is an array of fields to export in data formats (if you want to export just some fields as opposed to all fields)</li>
</ul>

<h3 id="142">1.4.2</h3>
<ul>
  <li>Added: <code class="highlighter-rouge">overflow</code> flag to overwrite the css attribute ‘overflow’ of the chart container</li>
</ul>

<h3 id="141">1.4.1</h3>
<ul>
  <li>Fixed: cropped bullets on XY charts</li>
</ul>

<h3 id="140">1.4.0</h3>
<ul>
  <li>Fixed: beforeCapture issue on SVG document changes</li>
  <li>Added: Namespace check within globals for required third party software</li>
</ul>

<h3 id="139">1.3.9</h3>
<ul>
  <li>Fixed: Base tag gradient drawing issue (includes embedded hotfix for fabricjs commit #c9745ff)</li>
</ul>

<h3 id="138">1.3.8</h3>
<ul>
  <li>Fixed: Base tag clip path issue which draw the lines outside the plotarea</li>
</ul>

<h3 id="137">1.3.7</h3>
<ul>
  <li>Added: <code class="highlighter-rouge">columnNames</code> property, which allows overriding column names when expoerting chart data</li>
</ul>

<h3 id="136">1.3.6</h3>
<ul>
  <li>Fixed: Checking parseDates for category values for date interpretation</li>
</ul>

<h3 id="135">1.3.5</h3>
<ul>
  <li>Fixed: Scrollbar issue hiding the unselected scrollbar background area</li>
</ul>

<h3 id="134">1.3.4</h3>
<ul>
  <li>Fixed: Absolute legend positioning issue.</li>
</ul>

<h3 id="133">1.3.3</h3>
<ul>
  <li>Added: English as default language when define language does not exist</li>
</ul>

<h3 id="132">1.3.2</h3>
<ul>
  <li>Added: (<a href="#annotation-settings">drawing.autoClose</a>) new flag to automatically close the annotation mode after download</li>
  <li>Fixed: Internal pdfMake issue which prevented to generate PDFs in IE10, uses custom build until officially fixed</li>
</ul>

<h3 id="131">1.3.1</h3>
<ul>
  <li>Added: Timestamp date fields get converted as dates</li>
  <li>Fixed: XLSX respects given dateFormat</li>
  <li>Changed: JSON exports date fields as date objects by default</li>
</ul>

<h3 id="130">1.3.0</h3>
<ul>
  <li>Fixed: Issue hiding drawing container on “drawing.done”</li>
  <li>Fixed: Legend positioning issue with charts created in a hidden container</li>
</ul>

<h3 id="129">1.2.9</h3>
<ul>
  <li>Fixed: Issue with missing <code class="highlighter-rouge">export.css</code> which showed the canvas</li>
  <li>Fixed: Issue with empty menu items; adds list only with childNodes &gt; 1</li>
  <li>Fixed: Issue with hidden bullets; caused by wrong clip-paths</li>
  <li>Added: Polish language file ( thanks to piernik )</li>
</ul>

<h3 id="128">1.2.8</h3>
<ul>
  <li>Fixed: Issue in <code class="highlighter-rouge">gatherClassName</code> checking element type</li>
</ul>

<h3 id="127">1.2.7</h3>
<ul>
  <li>Fixed: Generates true JPG file instead PNG with JPG extension</li>
  <li>Fixed: Drag&amp;Drop feature does not activate automatically the annotation mode</li>
</ul>

<h3 id="126">1.2.6</h3>
<ul>
  <li>Added: Native EXCEL date cell type for date fields, forced by default</li>
  <li>Fixed: Issue in <code class="highlighter-rouge">getChartData</code> which ignored given data array ( affected API usage only )</li>
</ul>

<h3 id="125">1.2.5</h3>
<ul>
  <li>Added: Illustrator support; <code class="highlighter-rouge">reviver</code> method to <code class="highlighter-rouge">toSVG</code>; converts by default RGBA to HEX colors codes and places it’s dedicated opacity property</li>
  <li>Fixed: Multiline text positioning / line heights</li>
</ul>

<h3 id="124">1.2.4</h3>
<ul>
  <li>Added: <code class="highlighter-rouge">exportSelection</code> exports the current data selection</li>
  <li>Added: <code class="highlighter-rouge">dataDateFormat</code> converts the date-strings to date objects with given format</li>
  <li>Added: <code class="highlighter-rouge">dateFormat</code> converts the date in given format</li>
  <li>Added: <code class="highlighter-rouge">processData</code> to format date fields and translate fields</li>
  <li>Changed: <code class="highlighter-rouge">gatherChartData</code> collects data, fields and titles only and uses <code class="highlighter-rouge">processData</code> to format</li>
</ul>

<h3 id="123">1.2.3</h3>
<ul>
  <li>Fixed: Positioning issue on multiline labels</li>
</ul>

<h3 id="122">1.2.2</h3>
<ul>
  <li>Fixed: Issue with object changes which overwrite undo/redo object states</li>
  <li>Fixed: Issue with default fontSize</li>
</ul>

<h3 id="121">1.2.1</h3>
<ul>
  <li>Added: Possibility to add text, lines, shapes (<a href="#annotation-settings">details</a>)</li>
  <li>Added: Possibility to change drawing mode, color, opacity and size</li>
  <li>Added: Possibility to select,move,scale drawn items</li>
  <li>Added: Possibility to define dedicated drawing menu <code class="highlighter-rouge">drawing.menu</code> individual menu items get prioritised</li>
  <li>Added: Dropbox feature which allows to drag images into the chart <code class="highlighter-rouge">fileListener: true</code></li>
  <li>Added: Keylistener which allows to undo/redo/remove the drawn steps <code class="highlighter-rouge">keyListener: true</code></li>
  <li>Added: Isolated plugin to be able to initiate manually regardless of the chart setup</li>
  <li>Fixed: Conflict with prototypeJS which caused tainted return value from <code class="highlighter-rouge">toArray</code></li>
</ul>

<h3 id="120">1.2.0</h3>
<ul>
  <li>Fixed: Issue with deepMerge which did not allow to modfiy the pdfMake default settings</li>
  <li>Fixed: Menu issue which did not allow to modify the pdfMake settings</li>
  <li>Fixed: Undo issue which needed double attempts in the beginning</li>
  <li>Added: Drag/Scale feature in annotation mode; toggles automatically between drawing/dragging while hovering over the elements</li>
</ul>

<h3 id="119">1.1.9</h3>
<ul>
  <li>Added: <code class="highlighter-rouge">exportTitles</code> available in general or individual setup which exchanges the data field names with it’s dedicated title</li>
  <li>Fix: Interpolates missing data fields across data provider</li>
</ul>

<h3 id="118">1.1.8</h3>
<ul>
  <li>Added: Temporary workaround to bypass FileSaver check; issue prevented to open blob urls in safari browser</li>
</ul>

<h3 id="117">1.1.7</h3>
<ul>
  <li>Added: beforeCapture to be able to indicate the export process in some way</li>
  <li>Added: afterCapture to be able to modify the fabric instance if needed</li>
  <li>Added: SVG element as second argument within the “reviver” callback</li>
  <li>Added: Multiple arguments supported in “handleCallback” method</li>
</ul>

<h3 id="116">1.1.6</h3>
<ul>
  <li>Fix: Pattern render issue in IE;</li>
  <li>Added: Multiline support (workaround until fabricJS supports tspan)</li>
  <li>Added: General delay property to delay the capturing of the chart (<a href="#delay-the-capturing-before-export">details</a>)</li>
</ul>

<h3 id="115">1.1.5</h3>
<ul>
  <li>Fix: Tainted check issue which failed if location.origin wasn’t available</li>
  <li>Fix: Capture image check, triggers callback only if all images have been loaded</li>
  <li>Added: Multi language support; embedded english by default; overtakes chart language</li>
  <li>Added: Delay feature, which allows to delay the capturing (<a href="#delay-the-capturing-before-export">details</a>)</li>
</ul>

<h3 id="114">1.1.4</h3>
<ul>
  <li>Fix: Did not collect clip-path and pattern from legend</li>
  <li>Fix: External legend did not respect given width when positioned on left side</li>
  <li>Fix: Improved tainted image detection</li>
</ul>

<h3 id="113">1.1.3</h3>
<ul>
  <li>Added: Added reviver in capturing method to filter the drawn chart elements</li>
</ul>

<h3 id="112">1.1.2</h3>
<ul>
  <li>Added: Generalized fallback; does a lookup on the Blob constructor</li>
  <li>Fix: Wait for lazy images, triggers capture callback only when all images have been fully loaded</li>
  <li>Discovered: <a href="https://github.com/kangax/fabric.js/issues/2241">Safari 5 issue</a> please adapt fabric.js manually to solve it</li>
</ul>

<h3 id="111">1.1.1</h3>
<ul>
  <li>Fix: CSV export issue on date based charts</li>
  <li>Fix: Enhanced migration script to obtain more settings</li>
</ul>

<h3 id="110">1.1.0</h3>
<ul>
  <li>Fix: Print issue on safari which captured the actual page instead of the export</li>
  <li>Added: IE9 download fallback for <code class="highlighter-rouge">text/plain</code> and <code class="highlighter-rouge">image/*</code> mime types (CSS has been modified)</li>
  <li>Added: <code class="highlighter-rouge">toImage</code> method; returns <code class="highlighter-rouge">img</code> element with embedded base64 imagery</li>
  <li>Added: <code class="highlighter-rouge">getBase64</code> option in <code class="highlighter-rouge">toSVG</code></li>
  <li>Added: <code class="highlighter-rouge">toImage</code> usage in <code class="highlighter-rouge">toPRINT</code> to be able to choose the image type + settings.</li>
  <li>Added: <code class="highlighter-rouge">lossless</code> option in <code class="highlighter-rouge">toPRINT</code> (experimental)</li>
</ul>

<h3 id="109">1.0.9</h3>
<ul>
  <li>Added: IE9 base64 export</li>
  <li>Added: Third party updates + minified versions</li>
</ul>

<h3 id="108">1.0.8</h3>
<ul>
  <li>Fix: IE8 issue which prevents the chart from initiating</li>
</ul>

<h3 id="107">1.0.7</h3>
<ul>
  <li>Fix: issue on toCSV handling the header (first row)</li>
</ul>

<h3 id="106">1.0.6</h3>
<ul>
  <li>Fix: issue on revalidation the chart/map</li>
  <li>Added: <a href="http://docs.amcharts.com/3/javascriptcharts/AmSerialChart#path">path</a> to load the libaries by default</li>
</ul>

<h3 id="105">1.0.5</h3>
<ul>
  <li>Added: divId to be able to place the menu within an external container</li>
  <li>Added: menuWalker to replace the whole menu generation</li>
  <li>Added: menuReviver to adapt menu items before being appended to the list</li>
  <li>Added: libs.async to load dependencies asynchronous (default true)</li>
</ul>

<h3 id="104">1.0.4</h3>
<ul>
  <li>Considering classNamePrefix (dont’t forget to adapt export.css)</li>
  <li>Added: safety delay on print restore to ensure capturing the canvas</li>
</ul>

<h3 id="103">1.0.3</h3>
<ul>
  <li>Fix: flagged relative image paths as tainted</li>
</ul>

<h3 id="102">1.0.2</h3>
<ul>
  <li>Fix: compabitily on array method extension such as PrototypeJS</li>
</ul>

<h3 id="101">1.0.1</h3>
<ul>
  <li>Added: libs.reload: false, script tag crawling to avoid multiple insertions</li>
  <li>Fix: IE10 bug on print</li>
  <li>Fix: migration bug, replaces menu instead of appending</li>
</ul>

<h3 id="10">1.0</h3>
<ul>
  <li>Initial release</li>
</ul>

  </article>
</div>

      </div>
    </div>

    <footer class="site-footer">
  <div class="ui grid stackable">
    <div class="one wide column"></div>

    <div class="four wide column">
      <h1 class="ui header">Kevin Hou</h1>
      <h3 class="ui header">
        <a href="mailto:kevin.ch.hou@gmail.com">kevin.ch.hou@gmail.com</a>
      </h3>
      <h4 class="ui header">
        <i>San Francisco Bay Area</i>
      </h4>
    </div>

    <div class="four wide column footer-external">
      <h4 class="ui header"><i>Social</i></h4>
      <a href="https://www.instagram.com/lifeofkhou/" target="_blank">
        <img
          src="https://instagram-brand.com/wp-content/uploads/2016/11/Instagram_AppIcon_Aug2017.png?w=300"
        />
      </a>
      <a href="https://www.linkedin.com/in/kevinhou22" target="_blank">
        <img
          src="https://cdn1.iconfinder.com/data/icons/logotypes/32/square-linkedin-512.png"
        />
      </a>
      <a href="https://youtube.com/kevinhou22" target="_blank">
        <img
          src="https://cdn1.iconfinder.com/data/icons/google_jfk_icons_by_carlosjj/512/youtube.png"
        />
      </a>
      <a href="https://github.com/khou22" target="_blank">
        <img src="https://image.flaticon.com/icons/svg/25/25231.svg" />
      </a>
    </div>

    <div class="six wide column">
      <p class="text">Kevin Hou's portfolio and blog about programming, wood, design, and photography. Princeton University Computer Science '20. Lick-Wilmerding High School '16. San Francisco Bay Area.
</p>
    </div>

    <div class="one wide column"></div>
  </div>
</footer>

  </body>
</html>
